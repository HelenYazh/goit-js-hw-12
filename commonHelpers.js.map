{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\n\nexport async function fetchImages(query, page = 1) {\n    const API_KEY = \"43383270-573d9e698d4e4b734db4ac29f\";\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15,\n    });\n\n\n    try {\n        const response = await axios.get(\"\", { params })\n        return response.data;\n    } catch (error) {\n        console.log(error);\n    }\n}","const list = document.querySelector(\".gallery\");\n\nexport function createMarkup(arr) {\n\n    const markup = arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <ul>\n            <li><b>Likes</b> ${likes}</li>\n            <li><b>Views</b> ${views}</li>\n            <li><b>Comments</b> ${comments}</li>\n            <li><b>Downloads</b> ${downloads}</li>\n          </ul>\n        </li>`)\n        .join(\"\")\n\n    list.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nexport function clearGallery() {\n    list.innerHTML = \"\";\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from \"../src/js/pixabay-api.js\";\nimport { createMarkup, clearGallery } from \"../src/js/render-functions.js\";\n\n\nconst form = document.querySelector(\".search-form\");\nconst input = document.querySelector(\"#search-input\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load-more-btn\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n\nloader.style.display = \"none\";\nloadBtn.style.display = \"none\";\n\n\nform.addEventListener(\"submit\", handleSubmit);\nloadBtn.addEventListener(\"click\", handleClick);\nlet page = 1;\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n    if (input.value.trim() === \"\") {\n        return;\n    }\n\n    loader.style.display = \"block\";\n    clearGallery();\n\n    page = 1;\n\n    try {\n        const response = await fetchImages(input.value.trim(), page);\n\n        if (response.hits.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            })\n        };\n\n        createMarkup(response.hits);\n        if (response.totalHits > 15) {\n            loadBtn.style.display = \"block\";\n        } else {\n            loadBtn.style.display = \"none\";\n        }\n        lightbox.refresh();\n    } catch (error) {\n        console.log(error);\n    } finally {\n        loader.style.display = \"none\";\n    }\n}\n\n\nasync function handleClick() {\n    page += 1;\n\n    try {\n        loader.style.display = \"block\";\n        const response = await fetchImages(input.value.trim(), page);\n        createMarkup(response.hits);\n        lightbox.refresh();\n\n        const card = document.querySelector(\".gallery-item\");\n\n        if (card) {\n            const cardHeight = card.getBoundingClientRect().height;\n\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\"\n            });\n        }\n\n        const lastPage = Math.ceil(response.totalHits / 15);\n        if (lastPage === page) {\n            loadBtn.style.display = \"none\";\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: \"topRight\",\n            });\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        loader.style.display = \"none\";\n    }\n}"],"names":["axios","fetchImages","query","page","API_KEY","params","error","list","createMarkup","arr","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","form","input","loader","loadBtn","lightbox","SimpleLightbox","handleSubmit","handleClick","event","response","iziToast","card","cardHeight"],"mappings":"owBACAA,EAAM,SAAS,QAAU,2BAGlB,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAU,qCACVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EAClB,CAAK,EAGD,GAAI,CAEA,OADiB,MAAMH,EAAM,IAAI,GAAI,CAAE,OAAAK,EAAQ,GAC/B,IACnB,OAAQC,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACpB,CACL,CCvBA,MAAMC,EAAO,SAAS,cAAc,UAAU,EAEvC,SAASC,EAAaC,EAAK,CAE9B,MAAMC,EAASD,EAAI,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC5F;AAAA,qBACaL,CAAa;AAAA,sBACZD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGjBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA,cAE9B,EACL,KAAK,EAAE,EAEZV,EAAK,mBAAmB,YAAaG,CAAM,CAC/C,CAEO,SAASQ,GAAe,CAC3BX,EAAK,UAAY,EACrB,CCfA,MAAMY,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAGDH,EAAO,MAAM,QAAU,OACvBC,EAAQ,MAAM,QAAU,OAGxBH,EAAK,iBAAiB,SAAUM,CAAY,EAC5CH,EAAQ,iBAAiB,QAASI,CAAW,EAC7C,IAAIvB,EAAO,EAEX,eAAesB,EAAaE,EAAO,CAG/B,GAFAA,EAAM,eAAc,EAEhBP,EAAM,MAAM,KAAI,IAAO,GAI3B,CAAAC,EAAO,MAAM,QAAU,QACvBH,IAEAf,EAAO,EAEP,GAAI,CACA,MAAMyB,EAAW,MAAM3B,EAAYmB,EAAM,MAAM,KAAI,EAAIjB,CAAI,EAEvDyB,EAAS,KAAK,SAAW,GACzBC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,EAGLrB,EAAaoB,EAAS,IAAI,EACtBA,EAAS,UAAY,GACrBN,EAAQ,MAAM,QAAU,QAExBA,EAAQ,MAAM,QAAU,OAE5BC,EAAS,QAAO,CACnB,OAAQjB,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACNe,EAAO,MAAM,QAAU,MAC1B,EACL,CAGA,eAAeK,GAAc,CACzBvB,GAAQ,EAER,GAAI,CACAkB,EAAO,MAAM,QAAU,QACvB,MAAMO,EAAW,MAAM3B,EAAYmB,EAAM,MAAM,KAAI,EAAIjB,CAAI,EAC3DK,EAAaoB,EAAS,IAAI,EAC1BL,EAAS,QAAO,EAEhB,MAAMO,EAAO,SAAS,cAAc,eAAe,EAEnD,GAAIA,EAAM,CACN,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAC1B,CAAa,CACJ,CAEgB,KAAK,KAAKH,EAAS,UAAY,EAAE,IACjCzB,IACbmB,EAAQ,MAAM,QAAU,OACxBO,EAAS,KAAK,CACV,QAAS,4DACT,SAAU,UAC1B,CAAa,EAER,OAAQvB,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACNe,EAAO,MAAM,QAAU,MAC1B,CACL"}